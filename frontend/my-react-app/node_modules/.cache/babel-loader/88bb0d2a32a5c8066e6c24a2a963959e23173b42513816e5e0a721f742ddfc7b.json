{"ast":null,"code":"var _jsxFileName = \"D:\\\\PiereLV\\\\PythonEdSystem\\\\FlaskProject\\\\Personalized learning materials\\\\frontend\\\\my-react-app\\\\src\\\\components\\\\pages\\\\Functions\\\\apiUtils.jsx\",\n  _s = $RefreshSig$();\n// apiUtils.js\nimport { useNavigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const fetchData = async (url, setData, dataKey) => {\n  try {\n    const response = await fetch(url);\n    const data = await response.json();\n    if (Array.isArray(data[dataKey])) {\n      setData(data[dataKey]);\n    }\n  } catch (error) {\n    console.error(`Error fetching data from ${url}:`, error);\n  }\n};\nexport const renderListItems = (items, renderFunction) => /*#__PURE__*/_jsxDEV(\"ul\", {\n  children: Array.isArray(items) ? items.map(item => /*#__PURE__*/_jsxDEV(\"li\", {\n    children: renderFunction(item)\n  }, item.id, false, {\n    fileName: _jsxFileName,\n    lineNumber: 19,\n    columnNumber: 7\n  }, this)) : null\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 17,\n  columnNumber: 3\n}, this);\nexport const renderListItemsWithAction = (items, renderFunction, handleDelete, handleModify) => /*#__PURE__*/_jsxDEV(\"ul\", {\n  children: Array.isArray(items) ? items.map(item => /*#__PURE__*/_jsxDEV(\"li\", {\n    children: renderFunction(item, handleDelete, handleModify)\n  }, item.id, false, {\n    fileName: _jsxFileName,\n    lineNumber: 27,\n    columnNumber: 7\n  }, this)) : null\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 25,\n  columnNumber: 3\n}, this);\nexport const updateUserData = async (userId, updatedUserData, setData, dataKey) => {\n  try {\n    const response = await fetch(`http://localhost:5000/update_user/${userId}`, {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(updatedUserData)\n    });\n    if (response.ok) {\n      fetchData(`http://localhost:5000/get_${dataKey}`, setData, dataKey);\n      return true; // Successful update\n    } else {\n      console.error(`Error updating ${dataKey}:`, response.statusText);\n      return false;\n    }\n  } catch (error) {\n    console.error(`Error updating ${dataKey}:`, error);\n    return false;\n  }\n};\nexport const updateTestData = async (questionId, updatedQuestionData, setData, dataKey) => {\n  try {\n    const response = await fetch(`http://localhost:5000/update_test_questions/${questionId}`, {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(updatedQuestionData)\n    });\n    if (response.ok) {\n      fetchData(`http://localhost:5000/get_${dataKey}`, setData, dataKey);\n      return true; // Successful update\n    } else {\n      console.error(`Error updating ${dataKey}:`, response.statusText);\n      return false;\n    }\n  } catch (error) {\n    console.error(`Error updating ${dataKey}:`, error);\n    return false;\n  }\n};\nexport const UpdateForm = ({\n  formData,\n  fields,\n  onChange,\n  onSubmit\n}) => /*#__PURE__*/_jsxDEV(\"form\", {\n  onSubmit: onSubmit,\n  children: [fields.map(field => /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n      children: [field.label, \":\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: field.type || 'text',\n      name: field.name,\n      value: formData[field.name] || '',\n      onChange: e => onChange({\n        ...formData,\n        [field.name]: e.target.value\n      }),\n      required: field.required || false\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 9\n    }, this)]\n  }, field.name, true, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 7\n  }, this)), /*#__PURE__*/_jsxDEV(\"button\", {\n    type: \"submit\",\n    children: \"Update\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 94,\n    columnNumber: 5\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 81,\n  columnNumber: 3\n}, this);\n_c = UpdateForm;\nexport default UpdateForm;\nexport const checkUserRoleAccess = requiredUserRole => {\n  _s();\n  const navigate = useNavigate();\n  const isLoggedIn = sessionStorage.getItem(\"user_id\");\n  const userRole = sessionStorage.getItem(\"user_role\");\n  if (!isLoggedIn) {\n    navigate(\"/login\");\n    return false;\n  }\n  if (parseInt(userRole) !== requiredUserRole) {\n    navigate(\"/login\"); // Redirect to login if user role does not match\n    return false;\n  }\n  return true;\n};\n_s(checkUserRoleAccess, \"CzcTeTziyjMsSrAVmHuCCb6+Bfg=\", false, function () {\n  return [useNavigate];\n});\nvar _c;\n$RefreshReg$(_c, \"UpdateForm\");","map":{"version":3,"names":["useNavigate","jsxDEV","_jsxDEV","fetchData","url","setData","dataKey","response","fetch","data","json","Array","isArray","error","console","renderListItems","items","renderFunction","children","map","item","id","fileName","_jsxFileName","lineNumber","columnNumber","renderListItemsWithAction","handleDelete","handleModify","updateUserData","userId","updatedUserData","method","headers","body","JSON","stringify","ok","statusText","updateTestData","questionId","updatedQuestionData","UpdateForm","formData","fields","onChange","onSubmit","field","label","type","name","value","e","target","required","_c","checkUserRoleAccess","requiredUserRole","_s","navigate","isLoggedIn","sessionStorage","getItem","userRole","parseInt","$RefreshReg$"],"sources":["D:/PiereLV/PythonEdSystem/FlaskProject/Personalized learning materials/frontend/my-react-app/src/components/pages/Functions/apiUtils.jsx"],"sourcesContent":["// apiUtils.js\r\nimport { useNavigate } from \"react-router-dom\";\r\nexport const fetchData = async (url, setData, dataKey) => {\r\n  try {\r\n    const response = await fetch(url);\r\n    const data = await response.json();\r\n\r\n    if (Array.isArray(data[dataKey])) {\r\n      setData(data[dataKey]);\r\n    }\r\n  } catch (error) {\r\n    console.error(`Error fetching data from ${url}:`, error);\r\n  }\r\n};\r\n\r\nexport const renderListItems = (items, renderFunction) => (\r\n  <ul>\r\n    {Array.isArray(items) ? items.map((item) => (\r\n      <li key={item.id}>{renderFunction(item)}</li>\r\n    )) : null}\r\n  </ul>\r\n);\r\n\r\nexport const renderListItemsWithAction = (items, renderFunction, handleDelete, handleModify) => (\r\n  <ul>\r\n    {Array.isArray(items) ? items.map((item) => (\r\n      <li key={item.id}>\r\n        {renderFunction(item, handleDelete, handleModify)}\r\n      </li>\r\n    )) : null}\r\n  </ul>\r\n);\r\n\r\nexport const updateUserData = async (userId, updatedUserData, setData, dataKey) => {\r\n  try {\r\n    const response = await fetch(`http://localhost:5000/update_user/${userId}`, {\r\n      method: 'PUT',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify(updatedUserData),\r\n    });\r\n\r\n    if (response.ok) {\r\n      fetchData(`http://localhost:5000/get_${dataKey}`, setData, dataKey);\r\n      return true; // Successful update\r\n    } else {\r\n      console.error(`Error updating ${dataKey}:`, response.statusText);\r\n      return false;\r\n    }\r\n  } catch (error) {\r\n    console.error(`Error updating ${dataKey}:`, error);\r\n    return false;\r\n  }\r\n};\r\n\r\nexport const updateTestData = async (questionId, updatedQuestionData, setData, dataKey) => {\r\n  try {\r\n    const response = await fetch(`http://localhost:5000/update_test_questions/${questionId}`, {\r\n      method: 'PUT',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify(updatedQuestionData),\r\n    });\r\n\r\n    if (response.ok) {\r\n      fetchData(`http://localhost:5000/get_${dataKey}`, setData, dataKey);\r\n      return true; // Successful update\r\n    } else {\r\n      console.error(`Error updating ${dataKey}:`, response.statusText);\r\n      return false;\r\n    }\r\n  } catch (error) {\r\n    console.error(`Error updating ${dataKey}:`, error);\r\n    return false;\r\n  }\r\n};\r\n\r\nexport const UpdateForm = ({ formData, fields, onChange, onSubmit }) => (\r\n  <form onSubmit={onSubmit}>\r\n    {fields.map((field) => (\r\n      <div key={field.name}>\r\n        <label>{field.label}:</label>\r\n        <input\r\n          type={field.type || 'text'}\r\n          name={field.name}\r\n          value={formData[field.name] || ''}\r\n          onChange={(e) => onChange({ ...formData, [field.name]: e.target.value })}\r\n          required={field.required || false}\r\n        />\r\n      </div>\r\n    ))}\r\n    <button type=\"submit\">Update</button>\r\n  </form>\r\n);\r\n\r\nexport default UpdateForm;\r\n\r\n\r\nexport const checkUserRoleAccess = (requiredUserRole) => {\r\n  const navigate = useNavigate();\r\n\r\n  const isLoggedIn = sessionStorage.getItem(\"user_id\");\r\n  const userRole = sessionStorage.getItem(\"user_role\");\r\n\r\n  if (!isLoggedIn) {\r\n      navigate(\"/login\");\r\n      return false;\r\n  }\r\n\r\n  if (parseInt(userRole) !== requiredUserRole) {\r\n      navigate(\"/login\"); // Redirect to login if user role does not match\r\n      return false;\r\n  }\r\n\r\n  return true;\r\n};"],"mappings":";;AAAA;AACA,SAASA,WAAW,QAAQ,kBAAkB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAC/C,OAAO,MAAMC,SAAS,GAAG,MAAAA,CAAOC,GAAG,EAAEC,OAAO,EAAEC,OAAO,KAAK;EACxD,IAAI;IACF,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAACJ,GAAG,CAAC;IACjC,MAAMK,IAAI,GAAG,MAAMF,QAAQ,CAACG,IAAI,CAAC,CAAC;IAElC,IAAIC,KAAK,CAACC,OAAO,CAACH,IAAI,CAACH,OAAO,CAAC,CAAC,EAAE;MAChCD,OAAO,CAACI,IAAI,CAACH,OAAO,CAAC,CAAC;IACxB;EACF,CAAC,CAAC,OAAOO,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAE,4BAA2BT,GAAI,GAAE,EAAES,KAAK,CAAC;EAC1D;AACF,CAAC;AAED,OAAO,MAAME,eAAe,GAAGA,CAACC,KAAK,EAAEC,cAAc,kBACnDf,OAAA;EAAAgB,QAAA,EACGP,KAAK,CAACC,OAAO,CAACI,KAAK,CAAC,GAAGA,KAAK,CAACG,GAAG,CAAEC,IAAI,iBACrClB,OAAA;IAAAgB,QAAA,EAAmBD,cAAc,CAACG,IAAI;EAAC,GAA9BA,IAAI,CAACC,EAAE;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAA4B,CAC7C,CAAC,GAAG;AAAI;EAAAH,QAAA,EAAAC,YAAA;EAAAC,UAAA;EAAAC,YAAA;AAAA,OACP,CACL;AAED,OAAO,MAAMC,yBAAyB,GAAGA,CAACV,KAAK,EAAEC,cAAc,EAAEU,YAAY,EAAEC,YAAY,kBACzF1B,OAAA;EAAAgB,QAAA,EACGP,KAAK,CAACC,OAAO,CAACI,KAAK,CAAC,GAAGA,KAAK,CAACG,GAAG,CAAEC,IAAI,iBACrClB,OAAA;IAAAgB,QAAA,EACGD,cAAc,CAACG,IAAI,EAAEO,YAAY,EAAEC,YAAY;EAAC,GAD1CR,IAAI,CAACC,EAAE;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAEZ,CACL,CAAC,GAAG;AAAI;EAAAH,QAAA,EAAAC,YAAA;EAAAC,UAAA;EAAAC,YAAA;AAAA,OACP,CACL;AAED,OAAO,MAAMI,cAAc,GAAG,MAAAA,CAAOC,MAAM,EAAEC,eAAe,EAAE1B,OAAO,EAAEC,OAAO,KAAK;EACjF,IAAI;IACF,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAE,qCAAoCsB,MAAO,EAAC,EAAE;MAC1EE,MAAM,EAAE,KAAK;MACbC,OAAO,EAAE;QACP,cAAc,EAAE;MAClB,CAAC;MACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACL,eAAe;IACtC,CAAC,CAAC;IAEF,IAAIxB,QAAQ,CAAC8B,EAAE,EAAE;MACflC,SAAS,CAAE,6BAA4BG,OAAQ,EAAC,EAAED,OAAO,EAAEC,OAAO,CAAC;MACnE,OAAO,IAAI,CAAC,CAAC;IACf,CAAC,MAAM;MACLQ,OAAO,CAACD,KAAK,CAAE,kBAAiBP,OAAQ,GAAE,EAAEC,QAAQ,CAAC+B,UAAU,CAAC;MAChE,OAAO,KAAK;IACd;EACF,CAAC,CAAC,OAAOzB,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAE,kBAAiBP,OAAQ,GAAE,EAAEO,KAAK,CAAC;IAClD,OAAO,KAAK;EACd;AACF,CAAC;AAED,OAAO,MAAM0B,cAAc,GAAG,MAAAA,CAAOC,UAAU,EAAEC,mBAAmB,EAAEpC,OAAO,EAAEC,OAAO,KAAK;EACzF,IAAI;IACF,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAE,+CAA8CgC,UAAW,EAAC,EAAE;MACxFR,MAAM,EAAE,KAAK;MACbC,OAAO,EAAE;QACP,cAAc,EAAE;MAClB,CAAC;MACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACK,mBAAmB;IAC1C,CAAC,CAAC;IAEF,IAAIlC,QAAQ,CAAC8B,EAAE,EAAE;MACflC,SAAS,CAAE,6BAA4BG,OAAQ,EAAC,EAAED,OAAO,EAAEC,OAAO,CAAC;MACnE,OAAO,IAAI,CAAC,CAAC;IACf,CAAC,MAAM;MACLQ,OAAO,CAACD,KAAK,CAAE,kBAAiBP,OAAQ,GAAE,EAAEC,QAAQ,CAAC+B,UAAU,CAAC;MAChE,OAAO,KAAK;IACd;EACF,CAAC,CAAC,OAAOzB,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAE,kBAAiBP,OAAQ,GAAE,EAAEO,KAAK,CAAC;IAClD,OAAO,KAAK;EACd;AACF,CAAC;AAED,OAAO,MAAM6B,UAAU,GAAGA,CAAC;EAAEC,QAAQ;EAAEC,MAAM;EAAEC,QAAQ;EAAEC;AAAS,CAAC,kBACjE5C,OAAA;EAAM4C,QAAQ,EAAEA,QAAS;EAAA5B,QAAA,GACtB0B,MAAM,CAACzB,GAAG,CAAE4B,KAAK,iBAChB7C,OAAA;IAAAgB,QAAA,gBACEhB,OAAA;MAAAgB,QAAA,GAAQ6B,KAAK,CAACC,KAAK,EAAC,GAAC;IAAA;MAAA1B,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAO,CAAC,eAC7BvB,OAAA;MACE+C,IAAI,EAAEF,KAAK,CAACE,IAAI,IAAI,MAAO;MAC3BC,IAAI,EAAEH,KAAK,CAACG,IAAK;MACjBC,KAAK,EAAER,QAAQ,CAACI,KAAK,CAACG,IAAI,CAAC,IAAI,EAAG;MAClCL,QAAQ,EAAGO,CAAC,IAAKP,QAAQ,CAAC;QAAE,GAAGF,QAAQ;QAAE,CAACI,KAAK,CAACG,IAAI,GAAGE,CAAC,CAACC,MAAM,CAACF;MAAM,CAAC,CAAE;MACzEG,QAAQ,EAAEP,KAAK,CAACO,QAAQ,IAAI;IAAM;MAAAhC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACnC,CAAC;EAAA,GARMsB,KAAK,CAACG,IAAI;IAAA5B,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OASf,CACN,CAAC,eACFvB,OAAA;IAAQ+C,IAAI,EAAC,QAAQ;IAAA/B,QAAA,EAAC;EAAM;IAAAI,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAQ,CAAC;AAAA;EAAAH,QAAA,EAAAC,YAAA;EAAAC,UAAA;EAAAC,YAAA;AAAA,OACjC,CACP;AAAC8B,EAAA,GAhBWb,UAAU;AAkBvB,eAAeA,UAAU;AAGzB,OAAO,MAAMc,mBAAmB,GAAIC,gBAAgB,IAAK;EAAAC,EAAA;EACvD,MAAMC,QAAQ,GAAG3D,WAAW,CAAC,CAAC;EAE9B,MAAM4D,UAAU,GAAGC,cAAc,CAACC,OAAO,CAAC,SAAS,CAAC;EACpD,MAAMC,QAAQ,GAAGF,cAAc,CAACC,OAAO,CAAC,WAAW,CAAC;EAEpD,IAAI,CAACF,UAAU,EAAE;IACbD,QAAQ,CAAC,QAAQ,CAAC;IAClB,OAAO,KAAK;EAChB;EAEA,IAAIK,QAAQ,CAACD,QAAQ,CAAC,KAAKN,gBAAgB,EAAE;IACzCE,QAAQ,CAAC,QAAQ,CAAC,CAAC,CAAC;IACpB,OAAO,KAAK;EAChB;EAEA,OAAO,IAAI;AACb,CAAC;AAACD,EAAA,CAjBWF,mBAAmB;EAAA,QACbxD,WAAW;AAAA;AAAA,IAAAuD,EAAA;AAAAU,YAAA,CAAAV,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}